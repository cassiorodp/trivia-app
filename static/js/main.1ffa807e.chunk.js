(this["webpackJsonptest-redux"]=this["webpackJsonptest-redux"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},44:function(e,t,n){},46:function(e,t){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(20),o=n.n(s),r=n(25),i=n(14),c=(n(40),n(3)),u=(n(41),n(10)),l=n(11),d=n(13),b=n(12),h=n(1),m=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{"data-testid":"settings-title",children:"TITLE"})})}}]),n}(a.Component),p=n(15),j=n.n(p),g=n(19),f=n(22),O=n(5),v="SAVE_LOGIN",y="LOADING_TRUE",x="REQUEST_COMPLETE",k="REQUEST_FAIL",w=n.p+"static/media/silviosantos.42e6a049.gif",S=n.p+"static/media/theme-song.2067cea8.mp3",N=n.p+"static/media/proxima-pergunta.297be688.mp3",T=(n(44),n.p+"static/media/show-do-milhao.da1746dd.png"),C=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={btnDisable:!0,name:"",email:"",startGame:!1},e.checkLogin=e.checkLogin.bind(Object(O.a)(e)),e.goToConfig=e.goToConfig.bind(Object(O.a)(e)),e.goToGamePage=e.goToGamePage.bind(Object(O.a)(e)),e.handleChange=e.handleChange.bind(Object(O.a)(e)),e.renderForm=e.renderForm.bind(Object(O.a)(e)),e.saveToLocalStorage=e.saveToLocalStorage.bind(Object(O.a)(e)),e.startTheme=new Audio(S),e.nextSound=new Audio(N),e}return Object(l.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.id,s=n.value;this.setState(Object(f.a)({},a,s),(function(){t.checkLogin()}))}},{key:"checkLogin",value:function(){var e=this.state,t=e.name,n=e.email;/\S+@\S+\.\S+/.test(n)&&t?this.setState({btnDisable:!1}):this.setState({btnDisable:!0})}},{key:"goToConfig",value:function(){this.props.history.push("/config")}},{key:"goToGamePage",value:function(){var e=this.props.history;localStorage.getItem("token")&&e.push("/tela-de-jogo")}},{key:"saveToLocalStorage",value:function(){var e=Object(g.a)(j.a.mark((function e(){var t,n,a,s,o,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.name,a=t.email,s={player:{name:n,gravatarEmail:a,score:0,assertions:0}},localStorage.setItem("state",JSON.stringify(s)),e.next=5,fetch("https://opentdb.com/api_token.php?command=request");case 5:return o=e.sent,e.next=8,o.json();case 8:r=e.sent,localStorage.setItem("token",JSON.stringify(r.token));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderPlayButton",value:function(){var e=this;return Object(h.jsxs)("div",{className:"page-logo",children:[Object(h.jsx)("img",{className:"image",src:T,alt:"logo"}),Object(h.jsx)("button",{className:"play-button",type:"button",onClick:function(){e.setState({startGame:!0}),e.startTheme.play()},children:"Jogar"})]})}},{key:"renderForm",value:function(){var e=this,t=this.state,n=t.btnDisable,a=t.name,s=t.email,o=this.props,r=o.sendLogin,i=o.getQuestions;return Object(h.jsxs)("form",{className:"home-form",children:[Object(h.jsxs)("label",{htmlFor:"name",className:"form-label",children:["Nome:",Object(h.jsx)("input",{className:"form-control","data-testid":"input-player-name",type:"text",id:"name",placeholder:"Digite seu nome",onChange:this.handleChange})]}),Object(h.jsxs)("label",{htmlFor:"email",className:"form-label",children:["Email:",Object(h.jsx)("input",{className:"form-control","data-testid":"input-gravatar-email",type:"email",id:"email",placeholder:"Digite seu email",onChange:this.handleChange})]}),Object(h.jsxs)("div",{className:"button-section",children:[Object(h.jsx)("button",{className:"btn btn-light start-button",disabled:n,"data-testid":"btn-play",type:"button",onClick:Object(g.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveToLocalStorage();case 2:return r(a,s),t.next=5,i(JSON.parse(localStorage.getItem("token")));case 5:e.startTheme.pause(),e.nextSound.play(),e.goToGamePage();case 8:case"end":return t.stop()}}),t)}))),children:"Iniciar"}),Object(h.jsx)("button",{className:"config-button","data-testid":"btn-settings",type:"button",onClick:this.goToConfig,children:Object(h.jsx)("i",{className:"fas fa-cog"})})]})]})}},{key:"render",value:function(){var e=this.props.loading,t=this.state.startGame;return e?Object(h.jsx)("img",{className:"loading-img",src:w,alt:"silvio santos"}):t?t?this.renderForm():void 0:this.renderPlayButton()}}]),n}(a.Component),q=Object(i.b)((function(e){return{loading:e.questions.loading}}),(function(e){return{sendLogin:function(t,n){return e(function(e,t){return{type:v,name:e,email:t}}(t,n))},getQuestions:function(t){return e(function(e){return function(){var t=Object(g.a)(j.a.mark((function t(n){var a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:y}),t.next=4,fetch("https://opentdb.com/api.php?amount=5&token=".concat(e,"&encode=base64"));case 4:return a=t.sent,t.next=7,a.json();case 7:s=t.sent,n({type:x,questions:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n((o=t.t0,{type:k,error:o}));case 14:case"end":return t.stop()}var o}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(C),I=n(32),B=n(7),A=n(28),J=n.n(A),L=(n(47),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.email,a=e.score;return Object(h.jsxs)("header",{className:"header-player",children:[Object(h.jsx)("img",{className:"profile-picture","data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(J()(n).toString()),alt:"profile"}),Object(h.jsx)("span",{"data-testid":"header-player-name",children:"Jogador: ".concat(t)}),Object(h.jsx)("span",{"data-testid":"header-score",children:"Placar: ".concat(a)})]})}}]),n}(a.Component)),D=Object(i.b)((function(e){var t=e.login;return{name:t.name,email:t.email}}))(L),E=n.p+"static/media/que-pena.afd94236.mp3",P=n.p+"static/media/certa-resposta.ac7432fe.mp3",G=(n(48),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={answers:[],buttonDisable:!1,colorBorders:!1,nextButton:!1,questionNumber:0,time:30},e.nextSound=new Audio(N),e.wrongSound=new Audio(E),e.rightSound=new Audio(P),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.shuffleAnswers(),this.counter()}},{key:"stopTimer",value:function(){var e=this.state.intervalId;clearInterval(e),this.setState({buttonDisable:!0,colorBorders:!0,nextButton:!0})}},{key:"resetTimer",value:function(){this.setState({buttonDisable:!1,colorBorders:!1,time:30,nextButton:!1}),this.counter()}},{key:"checkCounter",value:function(){this.state.time<=1&&this.stopTimer()}},{key:"counter",value:function(){var e=this,t=setInterval((function(){return e.setState((function(e){return{time:e.time-1}}),e.checkCounter())}),1e3);this.setState({intervalId:t})}},{key:"nextQuestion",value:function(){var e=this,t=this.state.questionNumber,n=this.props.history;t<4?this.setState((function(e){return{questionNumber:e.questionNumber+1}}),(function(){e.shuffleAnswers(),e.nextSound.play()})):n.push("/tela-de-feedback")}},{key:"savePoints",value:function(e){var t=e.target.id,n=this.state,a=n.questionNumber,s=n.time,o=this.props.questions.results[a].difficulty;if("correct"===t){var r=10+s*function(){switch(atob(o)){case"hard":return 3;case"medium":return 2;case"easy":return 1;default:return 0}}(),i=JSON.parse(localStorage.getItem("state")).player,c={player:Object(B.a)(Object(B.a)({},i),{},{assertions:i.assertions+1,score:i.score+r})};localStorage.setItem("state",JSON.stringify(c))}}},{key:"shuffleAnswers",value:function(){var e=this.state.questionNumber,t=this.props.questions.results[e],n=t.type,a=t.incorrect_answers,s=t.correct_answer,o=Object(I.a)(a);o.splice("boolean"===n?Math.floor(2*Math.random()+0):Math.floor(3*Math.random()+0),0,s),this.setState({answers:o})}},{key:"createButtons",value:function(){var e=this,t=this.state,n=t.answers,a=t.questionNumber,s=this.state,o=s.buttonDisable,r=s.colorBorders,i=this.props.questions.results[a].correct_answer;return n.map((function(t,n){return t===i?Object(h.jsx)("button",{id:"correct","data-testid":"correct-answer",className:"answer correct-answer",disabled:o,type:"button",style:r?{backgroundColor:"#13814A "}:null,onClick:function(t){e.setState({colorBorders:!0}),e.savePoints(t),e.stopTimer(),e.rightSound.play()},children:atob(t)},t):Object(h.jsx)("button",{"data-testid":"wrong-answer-".concat(n),className:"answer wrong-answer",disabled:o,type:"button",style:r?{backgroundColor:"#000000 "}:null,onClick:function(){e.setState({colorBorders:!0}),e.stopTimer(),e.wrongSound.play()},children:atob(t)},t)}))}},{key:"renderNextButton",value:function(){var e=this;return Object(h.jsx)("button",{className:"next-button",type:"button",onClick:function(){e.nextQuestion(),e.resetTimer()},"data-testid":"btn-next",children:"Pr\xf3xima"})}},{key:"renderContent",value:function(){var e=JSON.parse(localStorage.getItem("state")).player.score,t=this.state,n=t.time,a=t.questionNumber,s=t.nextButton,o=this.props.questions.results;return Object(h.jsxs)("main",{className:"gamepage-content",children:[Object(h.jsx)(D,{score:e}),Object(h.jsxs)("section",{children:[Object(h.jsx)("p",{"data-testid":"question-category",children:atob(o[a].category)}),Object(h.jsx)("p",{"data-testid":"question-text",children:atob(o[a].question)}),Object(h.jsx)("div",{className:"answers-section",children:this.createButtons()}),Object(h.jsx)("div",{children:s&&this.renderNextButton()}),Object(h.jsx)("div",{className:"question-timer",children:"Tempo: ".concat(n)})]})]})}},{key:"render",value:function(){return Object(h.jsx)("div",{children:this.renderContent()})}}]),n}(a.Component)),M=Object(i.b)((function(e){return{questions:e.questions.questions}}))(G),R=n.p+"static/media/losing-sound.41ea0c54.mp3",H=n.p+"static/media/winning-sound.390d14cf.mp3",_=n.p+"static/media/tombo.08748272.gif",F=n.p+"static/media/comemoracao.20b8f380.gif",Q=(n(49),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={win:!1},e.goToHome=e.goToHome.bind(Object(O.a)(e)),e.goToRanking=e.goToRanking.bind(Object(O.a)(e)),e.winning=new Audio(H),e.losing=new Audio(R),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.selectGif()}},{key:"selectGif",value:function(){JSON.parse(localStorage.getItem("state")).player.assertions>=3&&this.setState({win:!0})}},{key:"goToRanking",value:function(){this.props.history.push("/tela-de-ranking")}},{key:"goToHome",value:function(){this.props.history.push("/")}},{key:"feedbackMessage",value:function(){var e=JSON.parse(localStorage.getItem("state")).player.assertions;return e<3?(this.losing.play(),"Podia ser melhor..."):e>=3?(this.winning.play(),"Mandou bem!"):void 0}},{key:"render",value:function(){var e=this.state.win,t=JSON.parse(localStorage.getItem("state")).player,n=t.assertions,a=t.score;return Object(h.jsxs)("main",{className:"feedback-content",children:[Object(h.jsx)(D,{score:a}),Object(h.jsxs)("section",{className:"feedback-text",children:[Object(h.jsx)("img",{className:"feedback-gif",src:e?F:_,alt:"winning or losing "}),Object(h.jsx)("p",{"data-testid":"feedback-text",children:this.feedbackMessage()}),Object(h.jsxs)("p",{children:["Voc\xea acertou"," ",Object(h.jsx)("span",{"data-testid":"feedback-total-question",children:n})]}),Object(h.jsxs)("p",{children:["Um total de"," ",Object(h.jsx)("span",{"data-testid":"feedback-total-score",children:a})]})]}),Object(h.jsxs)("section",{className:"feedback-buttons",children:[Object(h.jsx)("button",{className:"play-again-button",type:"button","data-testid":"btn-play-again",onClick:this.goToHome,children:"Jogar Novamente"}),Object(h.jsx)("button",{className:"ranking-button",type:"button","data-testid":"btn-ranking",onClick:this.goToRanking,children:"Ver Ranking"})]})]})}}]),n}(a.Component)),U=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).rankingToHome=e.rankingToHome.bind(Object(O.a)(e)),e}return Object(l.a)(n,[{key:"rankingToHome",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("title",{"data-testid":"ranking-title",children:"Ranking dos Jogadores"}),Object(h.jsx)("button",{type:"button","data-testid":"btn-go-home",onClick:this.rankingToHome,children:"Voltar ao In\xedcio"})]})}}]),n}(a.Component);function V(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(c.a,{exact:!0,path:"/",component:q}),Object(h.jsx)(c.a,{exact:!0,path:"/config",component:m}),Object(h.jsx)(c.a,{exact:!0,path:"/tela-de-jogo",component:M}),Object(h.jsx)(c.a,{exact:!0,path:"/tela-de-feedback",component:Q}),Object(h.jsx)(c.a,{exact:!0,path:"/tela-de-ranking",component:U})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=n(17),$=n(30),z=n(31),K={name:"",email:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(B.a)(Object(B.a)({},e),{},{name:t.name,email:t.email});default:return e}},Y={loading:!1,questions:{}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(B.a)(Object(B.a)({},e),{},{loading:!0});case x:return Object(B.a)(Object(B.a)({},e),{},{loading:!1,questions:t.questions});case k:return Object(B.a)(Object(B.a)({},e),{},{loading:!1,error:t.error});default:return e}},ee=Object(W.combineReducers)({login:X,questions:Z}),te=Object(W.createStore)(ee,Object(z.composeWithDevTools)(Object(W.applyMiddleware)($.a)));window.Cypress&&(window.store=te);var ne=te;o.a.render(Object(h.jsx)(r.a,{basename:"/trivia-app",children:Object(h.jsx)(i.a,{store:ne,children:Object(h.jsx)(V,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.1ffa807e.chunk.js.map